<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Download and Optionally Geoprocess ZCTAs — zi_get_geometry • zippeR</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Download and Optionally Geoprocess ZCTAs — zi_get_geometry"><meta property="og:description" content="This function returns geometric data for ZIP Code Tabulation
    Areas (ZCTAs), which are rough approximations of many (but not all)
    USPS ZIP codes. Downloading and processing these data will be heavily
    affected by your internet connection, your choice for the cb
    argument, and the processing power of your computer (if you select
    specific counties)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">zippeR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/chris-prener/zippeR/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Download and Optionally Geoprocess ZCTAs</h1>
    <small class="dont-index">Source: <a href="https://github.com/chris-prener/zippeR/blob/HEAD/R/zi_get_geometry.R" class="external-link"><code>R/zi_get_geometry.R</code></a></small>
    <div class="hidden name"><code>zi_get_geometry.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function returns geometric data for ZIP Code Tabulation
    Areas (ZCTAs), which are rough approximations of many (but not all)
    USPS ZIP codes. Downloading and processing these data will be heavily
    affected by your internet connection, your choice for the <code>cb</code>
    argument, and the processing power of your computer (if you select
    specific counties).</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">zi_get_geometry</span> <span class="op">(</span><span class="va">year</span>, style <span class="op">=</span> <span class="st">"zcta5"</span>, return <span class="op">=</span> <span class="st">"id"</span>, class <span class="op">=</span> <span class="st">"sf"</span>,
    state <span class="op">=</span> <span class="cn">NULL</span>, county <span class="op">=</span> <span class="cn">NULL</span>, cb <span class="op">=</span> <span class="cn">FALSE</span>, starts_with <span class="op">=</span> <span class="cn">NULL</span>,
    includes <span class="op">=</span> <span class="cn">NULL</span>, excludes <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">method</span>, shift_geo <span class="op">=</span> <span class="cn">FALSE</span>,
    debug <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>year</dt>
<dd><p>A four-digit numeric scalar for year. <code>zippeR</code> currently
supports data between 2010 and 2021.</p></dd>


<dt>style</dt>
<dd><p>A character scalar - either <code>"zcta5"</code> or <code>"zcta3"</code>.
See Details below.</p></dd>


<dt>return</dt>
<dd><p>A character scalar; if <code>"id"</code> (default), only the five-digit
number of each ZCTA (or three-digit if <code>style = "zcta3"</code>) is returned.
This is the only valid option for  <code>style = "zcta3"</code>. For
<code>style = "zcta5"</code>, if <code>return = "full"</code>, all TIGER/Line columns
are returned.</p></dd>


<dt>class</dt>
<dd><p>A character scalar; if <code>"sf"</code> (default), a <code>sf</code> object
suitable for mapping will be returned. If <code>"tibble"</code>, an object
that omits the geometric data will be returned instead.</p></dd>


<dt>state</dt>
<dd><p>A scalar or vector with character state abbreviations
(e.x. <code>"MO"</code>) or numeric FIPS codes (e.x. <code>29</code>). ZCTAs that
are within the given states (determined based on a combination of
<code>year</code> and <code>method</code>) will be returned. See Details below for
more information. This argument is optional unless a argument is also
specified for <code>county</code>.</p></dd>


<dt>county</dt>
<dd><p>A character scalar or vector with character GEOIDs (e.x.
<code>"29510"</code>). ZCTAs that are within the given states (determined based
on a combination of <code>year</code> and <code>method</code>) will be returned. See
Details below for more information. This argument is optional.</p></dd>


<dt>cb</dt>
<dd><p>A logical scalar; if <code>FALSE</code>, the most detailed TIGER/Line
    data will be used for <code>style = "zcta5"</code>. If <code>TRUE</code>, a
    generalized (1:500k) version of the data will be used. The generalized
    data will download significantly faster, though they show less detail.
    According to the <code><a href="https://rdrr.io/pkg/tigris/man/zctas.html" class="external-link">tigris::zctas()</a></code> documentation, the download size
    if <code>TRUE</code> is ~65MB while it is ~500MB if <code>cb = FALSE</code>.</p>
<p>This argument does not apply to <code>style = "zcta3"</code>, which only returns
    generalized data. It also does not apply if <code>class = "tibble"</code>.</p></dd>


<dt>starts_with</dt>
<dd><p>A character scalar or vector containing the first two
digits of a GEOID or ZCTA3 value to return. It defaults to <code>NULL</code>,
which will return all ZCTAs in the US. For example, supplying the argument
<code>starts_with = c("63", "64")</code> will return only those ZCTAs or ZCTA3s
that begin with 63 or 64. If you supply a state or a county, that will limit
the data this argument is applied to, potentially leading to missed ZCTAs.</p></dd>


<dt>includes</dt>
<dd><p>A character scalar or vector containing GEOID's or ZCTA3 values
to include when finalizing output. This may be necessary depending on what
is identified with the <code>method</code> argument.</p></dd>


<dt>excludes</dt>
<dd><p>A character scalar or vector containing GEOID's or ZCTA3 values
to exclude when finalizing output. This may be necessary depending on what
is identified with the <code>method</code> argument.</p></dd>


<dt>method</dt>
<dd><p>A character scalar - either <code>"intersect"</code> or <code>"centroid"</code>.
See Details below.</p></dd>


<dt>shift_geo</dt>
<dd><p>A logical scalar; if <code>TRUE</code>, Alaska, Hawaii, and Puerto Rico
will be re-positioned so that the lie to the southwest of the continental
United States. This defaults to <code>FALSE</code>, and can only be used when
states are not listed for the <code>state</code> argument. It does not apply
if <code>class = "tibble"</code>.</p></dd>


<dt>debug</dt>
<dd><p>Additional parameters for debugging and testing
<code>deprivateR</code>. The two current styles are <code>"messages"</code> (will
print all messages from <code>tigris</code> for five-digit ZCTAs or from
<code>sf</code> for three-digit ZCTAs) and <code>"warnings"</code> (will print
all warnings form <code>sf</code>).</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A <code>sf</code> object with ZCTAs matching the parameters specified above:
    either a nationwide file, a specific state or states, or a specific
    county or counties.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This function contains options for both the type of ZCTA and,
    optionally, for how state and county data are identified. For type,
    either five-digit or three-digit ZCTA geometries are available. The
    three-digit ZCTAs were created by geoprocessing the five-digit boundaries
    for each year, and then applying a modest amount of simplification
    (with <code><a href="https://r-spatial.github.io/sf/reference/geos_unary.html" class="external-link">sf::st_simplify()</a></code>) to reduce file size. The source files
    are available on GitHub at <a href="https://github.com/chris-prener/zcta3" class="external-link">https://github.com/chris-prener/zcta3</a>.</p>
<p>Since ZCTAs cross state lines, two methods are used to create these
    geometry data for years 2012 and beyond for states and all years for counties.
    The <code>"intersect"</code> method  will return ZCTAs that border the states or
    counties selected. In most  cases, this will result in more ZCTAs being
    returned than are actually within the states or counties selected.
    Conversely, the <code>"centroid"</code> method will return only ZCTAs whose
    centroids (geographical centers) lie within the states or counties named.
    In most cases, this will return fewer ZCTAs than actually lie within the
    states or counties selected. Users will need to review their data carefully
    and will likely need to use the <code>include</code> and <code>exclude</code> arguments
    to finalize the geographies returned.</p>
<p>For state-level data in 2010 and 2011, the Census Bureau published individual
    state files that will be utilized automatically by <code>zippeR</code>. If
    county-level data are requested for these years, the state-specific file
    will be used as a base before identifying ZCTAs within counties using
    either the <code>"intersect"</code> or <code>"centroid"</code> method described above.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by <a href="https://chris-prener.github.io" class="external-link">Christopher Prener</a>.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

